<script src="../../scripts/arrays.js"></script>
<script>
function search() {
  // Get the current URL
  const currentUrl = window.location.href;

  // Create a URL object from the current URL
  const url = new URL(currentUrl);

  // Get the query parameter "q" from the URL
  const searchTerm = url.searchParams.get("q"); // Use get() method

  if (searchTerm != null) {
    // Assuming you have the array repoBadges defined in arrays.js
    const filteredCategory = repoBadges.filter((badge) =>
      badge.category.toLowerCase().includes(searchTerm.toLowerCase())
    );

    // Return the filtered results as JSON
    return JSON.stringify(filteredCategory);
  } else {
    // If no search term is provided, return an empty JSON array
    return JSON.stringify([]);
  }
}

// Call the search function and set the response as the page content
const result = search();

// Set the Content-Type header to indicate JSON response
// Vercel or your server should handle this, not in the JavaScript code
// Instead, ensure that the server is configured to return JSON responses.

// Output the JSON response
document.write(result);
